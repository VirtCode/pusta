# Schemas

The [configuration](../custom/config.md), [module](../structure/module.md) and [repository](../structure/repository.md) files have autogenerated schemas to enable intellisense.


## Installation

The schemas can be installed using the `schema` command. It accepts an optional `--directory <dir>` argument which defaults to `$XDG_DATA_DIR/pusta` (on most systems it's `~/.local/share/pusta`)
```bash
pusta schema
```

The command generates the following schema files in the specified directory:
* `config.json`: Schema for general pusta configuration
* `repository.json`: Schema for pusta repository configuration
* `module.json`: Schema for pusta module configuration

### Usage

The following contains an example setup for the Visual Studio Code and Zed editors.

<details>
<summary><b>Visual Studio Code</b></summary>

To add yaml schemas to Visual Studio Code the [YAML Language Support by RedHat](https://marketplace.visualstudio.com/items?itemName=redhat.vscode-yaml) extension is required.
When installed the schemas can be added in the [user and workspace settings](https://code.visualstudio.com/docs/getstarted/settings#_creating-user-and-workspace-settings) like this:

```json
"yaml.schemas": {
  "/home/<username>/.local/share/pusta/schemas/config.json": [ "pusta/config.yml" ],
  "/home/<username>/.local/share/pusta/schemas/repository.json": [ "pusta.yml" ],
  "/home/<username>/.local/share/pusta/schemas/module.json": [ "module.yml" ]
}
```

</details>

<details>
<summary><b>Zed</b></summary>

Zed has built-in support for yaml schemas (using the [yaml language server by RedHat](https://github.com/redhat-developer/yaml-language-server)).
The schemas can be added in the `settings.json` file like this:

```json
  "lsp": {
    "yaml-language-server": {
      "settings": {
        "yaml": {
          "schemas": {
            "/home/<username>/.local/share/pusta/schemas/config.json": [ "pusta/config.yml" ],
            "/home/<username>/.local/share/pusta/schemas/repository.json": [ "pusta.yml" ],
            "/home/<username>/.local/share/pusta/schemas/module.json": [ "module.yml" ]
          }
        }
      }
    }
  }
```

</details>